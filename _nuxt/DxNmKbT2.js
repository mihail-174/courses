import{_ as y}from"./Cz5wtUCc.js";import{f as p,l as u,o,c as a,F as g,h as f,q as v,w as k,x,n as h,d as C,t as F,y as I,m as N,s as w,b as d}from"./4UpA0A4Z.js";import{_ as $}from"./DlAUqK2U.js";import{u as B,a as D}from"./BgKTUcSj.js";const S=p({__name:"category-filter",props:{categories:{type:Array,default:()=>[]},active:Number},setup(l){const e=l,n=u(()=>e.categories.map(s=>({...s,url:`/courses?category=${s.id}`,active:e.active===s.id})));return(s,r)=>{const i=y;return o(),a("div",null,[(o(!0),a(g,null,f(N(n),t=>(o(),v(i,{key:t.id,to:t.url,class:I({item:!0,active:t.active})},{default:k(()=>[t.color?(o(),a("span",{key:0,class:"color",style:x(`background-color: ${t.color};`)},null,4)):h("",!0),C(" "+F(t.name),1)]),_:2},1032,["to","class"]))),128))])}}}),V=$(S,[["__scopeId","data-v-e80e5b71"]]),q=p({__name:"course-list",props:{courses:{}},setup(l){return(e,n)=>{const s=y;return o(),a("div",null,[(o(!0),a(g,null,f(e.courses,r=>(o(),v(s,{key:r.id,class:"course",to:`/courses/${r.id}`},{default:k(()=>[r.category?(o(),a("span",{key:0,class:"category",style:x(`background-color: ${r.category.color||"#FFFFFF"}`)},null,4)):h("",!0),C(" "+F(r.name),1)]),_:2},1032,["to"]))),128))])}}}),z=$(q,[["__scopeId","data-v-677e450c"]]),A={key:0},W={key:1},j=p({__name:"index",setup(l){const e=B(),{data:n,pending:s}=D("courseListData",async()=>(await Promise.all([e.fetchCourses(),e.fetchCategories(),e.fetchColors()]),{courses:e.coursesWithCategory,categories:e.categoryWithColor})),r=u(()=>{var c;return((c=n.value)==null?void 0:c.categories)||[]}),i=w(),t=u(()=>Number(i.query.category)),b=u(()=>{var _;const c=((_=n.value)==null?void 0:_.courses)||[];return t.value?c.filter(m=>m.categoryId===t.value):c});return(c,_)=>{const m=V,L=z;return N(s)?(o(),a("div",A,"loading...")):(o(),a("div",W,[d(m,{categories:r.value,active:t.value},null,8,["categories","active"]),d(L,{courses:b.value||[]},null,8,["courses"])]))}}});export{j as default};
