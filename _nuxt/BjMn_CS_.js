import{f as v,r as I,o as a,c,a as s,g as p,v as w,F as h,h as b,i as x,j as B,t as g,p as y,e as k,k as D,l as F,m as n,n as V,q as A}from"./4UpA0A4Z.js";import{u as f,a as M}from"./BgKTUcSj.js";import{_ as S}from"./DlAUqK2U.js";const $=o=>(y("data-v-ec86c7ef"),o=o(),k(),o),L={class:"form__fields"},N={class:"form__field"},P=$(()=>s("label",{for:"form-field-name",class:"form__label"},"Название",-1)),T={class:"form__field"},U=$(()=>s("label",{for:"",class:"form__label"},"Категория",-1)),j={class:"form__radios"},q=["id","value"],E=["for"],O={class:"form__actions"},R=["disabled"],z=v({__name:"form-add-courses",props:{categories:{}},emits:["save"],setup(o,{emit:t}){const d=f(),l=t,e=I({id:0,name:"",categoryId:0}),u=()=>{e.value.id=d.courses.length,l("save",e.value),e.value={id:0,name:"",categoryId:0}};return(m,i)=>(a(),c("form",{class:"form",onSubmit:x(u,["prevent"])},[s("div",L,[s("div",N,[P,p(s("input",{"onUpdate:modelValue":i[0]||(i[0]=r=>e.value.name=r),id:"form-field-name",name:"name",type:"text",class:"form__input"},null,512),[[w,e.value.name]])]),s("div",T,[U,s("div",j,[(a(!0),c(h,null,b(m.categories,r=>(a(),c("div",{class:"form__radio",key:r.id},[p(s("input",{id:"form-field-radio-"+r.id,"onUpdate:modelValue":i[1]||(i[1]=_=>e.value.categoryId=_),value:r.id,name:"radios",type:"radio",class:"form__input"},null,8,q),[[B,e.value.categoryId]]),s("label",{for:"form-field-radio-"+r.id,class:"form__label"},g(r.name),9,E)]))),128))])]),s("div",O,[s("button",{disabled:(e.value.name===""||e.value.categoryId===0)&&"disabled",class:"form__submit"},"Готово",8,R)])])],32))}}),G=S(z,[["__scopeId","data-v-ec86c7ef"]]),H=D("adminStore",()=>{const o=f();return{addCourse:async t=>{await $fetch("/api/courses",{method:"POST",body:t}).then(d=>{console.log(`Курс "${d.name}" успешно добавлен`,d)}),await o.fetchCourses()}}}),C=o=>(y("data-v-67bc4fce"),o=o(),k(),o),J={class:"wrapper"},K={class:"sidebar"},Q={class:"block-courses"},W=C(()=>s("h3",{class:"block-courses__title"},"Список курсов",-1)),X={key:0},Y={key:1,class:"block-courses__list list"},Z={class:"content"},ss={class:"block-form"},es=C(()=>s("h3",{class:"block-form__title"},"Форма",-1)),os={class:"block-form__content"},ts={key:0},as=v({__name:"admin",setup(o){const t=f(),d=H(),{data:l,pending:e}=M("coursesListData",async()=>(await Promise.all([t.fetchCourses(),t.fetchCategories(),t.fetchColors()]),{courses:t.courses,categories:t.categories})),u=F(()=>t.courses),m=async i=>{await d.addCourse(i)};return(i,r)=>(a(),c("div",J,[s("div",K,[s("div",Q,[W,n(e)?(a(),c("div",X,"loading courses...")):(a(),c("div",Y,[n(l)?(a(!0),c(h,{key:0},b(n(u),_=>(a(),c("div",{class:"block-courses__item",key:_.id},g(_.name),1))),128)):V("",!0)]))])]),s("div",Z,[s("div",ss,[es,s("div",os,[n(e)?(a(),c("div",ts,"loading form...")):(a(),A(G,{key:1,onSave:m,categories:n(l).categories},null,8,["categories"]))])])])]))}}),ds=S(as,[["__scopeId","data-v-67bc4fce"]]);export{ds as default};
